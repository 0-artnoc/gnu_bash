*** ../bash-3.0/lib/readline/mbutil.c	Wed Jan 14 09:44:52 2004
--- lib/readline/mbutil.c	Wed Aug 18 22:25:57 2004
***************
*** 127,135 ****
      {
        tmp = mbrtowc (&wc, string + point, strlen (string + point), &ps);
!       while (wcwidth (wc) == 0)
  	{
  	  point += tmp;
  	  tmp = mbrtowc (&wc, string + point, strlen (string + point), &ps);
! 	  if (tmp == (size_t)(0) || tmp == (size_t)(-1) || tmp == (size_t)(-2))
  	    break;
  	}
--- 127,135 ----
      {
        tmp = mbrtowc (&wc, string + point, strlen (string + point), &ps);
!       while (tmp > 0 && wcwidth (wc) == 0)
  	{
  	  point += tmp;
  	  tmp = mbrtowc (&wc, string + point, strlen (string + point), &ps);
! 	  if (MB_NULLWCH (tmp) || MB_INVALIDCH (tmp))
  	    break;
  	}
